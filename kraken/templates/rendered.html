<!DOCTYPE html>
<html>
	  <head>
		    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		    <meta name="uuid" content="d8a347b2-1dc1-4f8b-b7bb-f09ff07f5989"/>
		    <meta itemprop="text_direction" content="horizontal-tb"/>
        <link rel="stylesheet" type="text/css" href="css/style.css"/>
        <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous"> -->
		</head>
	  <body>
		    <script language="javascript" type="text/javascript" src="js/jquery-1.11.3.min.js">
         <!--        <script
			   src="https://code.jquery.com/jquery-1.12.4.min.js"
			   integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
			   crossorigin="anonymous">
        </script> -->
		    <script>

			   $(document).ready(function() {
				     var uuid = $('meta[name=uuid]').attr('content');
				     if (localStorage) {
					       $('li[contenteditable=true], span').each(function(index) {
						         if(localStorage[uuid + this.id]) {
							           $(this).text(localStorage[uuid + this.id]);
						         }
					       });
				     }
				     // focus text fields when lines/words are clicked + mouseover
				     $('a.rect').click(function(e) {
					       e.preventDefault();
					       $('#' + $(this).attr('alt')).focus();
				     }).mouseover(function(e) {
					       $('#' + $(this).attr('alt')).addClass("hovered");
				     }).mouseout(function(e) {
					       $('#' + $(this).attr('alt')).removeClass("hovered");
				     });

				     // create mouseover effect on text fields
				     $('li[contenteditable=true], span').mouseover(function(e) {
					       /* console.log(this.id); */
					       $('a.rect[alt=' + this.id + ']').addClass("hovered");
				     }).mouseout(function(e) {
					       $('a.rect[alt=' + this.id + ']').removeClass("hovered");
				     }).focusin(function(e) {
					       $('a.rect[alt=' + this.id + ']').addClass("hovered");
				     }).focusout(function(e) {
					       $('a.rect[alt=' + this.id + ']').removeClass("hovered");
				     }).keydown(function(e) {
					       if(e.which == 13) {
						         e.preventDefault();
						         $(this).addClass('corrected');
						         var $els = $('[contenteditable=true]');
						         $els.eq($els.index(this) + 1).focus();
					       }
				         // save to local storage 
				     }).keyup(function () {
					       localStorage[uuid + this.id] = $(this).text();
				     });
				     // smooth scrolling
				     $('.page_anchor').click(function(e) {
					       e.preventDefault();
					       var target = $(this).attr("href");
					       var top = $(target).offset().top;
					       $('html, body').stop().animate({scrollTop: top }, 500);
				     });

				     // serializing the DOM to a file
				     $('#download_button').click(function(e) {
					       path = window.location.pathname;
					       $(this).attr('href', 'data:text/html,' + encodeURIComponent($('html')[0].outerHTML));
					       $(this).attr('download', path.substr(path.lastIndexOf('/') + 1));
				     });
			   });
		    </script>
		    <nav>
			      <ul>
				        <li><a class="page_anchor" href='#page_1'>1</a></li>
			      </ul>
			      <a id="download_button" href="#">Download</a>
		    </nav>
		    <section class="page container" id="page_1">
			      <div class="column" id="image-col">
				        <div class="img_container" id="page-image">
                    <script>
                     var imgPath = "images/page_1.png";
                    </script>
					          <img style="width: 100%;"
                         src="images/page_1.png"
                         alt="page image"
                         onload="imageLoad()"
                         id="image-page"/>
                    <canvas id="image-canvas"
                            onmousedown="canvasMouseDown(event)"
                            onmouseup="canvasMouseUp(event)"
                            onmousemove="canvasMouseMove(event)">
                    </canvas>
                    <!--
						             <a class="rect"
                         alt="line-1"
                         href=""
                         title=""/>
                         <a class="rect"
                         alt="line-2"
                         href=""
                         title=""
                         style="position: absolute; left: 0.5555555555555556%; top: 4.595588235294118%; width: 98.24074074074075%; height: 8.547794117647058%; z-index: 2;"
                         id="2"></a>
						             <a class="rect"
                         alt="line-3"
                         href=""
                         title=""
                         style="position: absolute; left: 0.18518518518518517%; top: 11.029411764705882%; width: 99.81481481481481%; height: 7.9963235294117645%; z-index: 2;"
                         id="3"></a>

						             <a class="rect"
                         alt="line-4"
                         href=""
                         title=""
                         style="position: absolute; left: 0.18518518518518517%; top: 16.544117647058822%; width: 99.81481481481481%; height: 7.904411764705882%; z-index: 2;"
                         id="4"></a>

						             <a class="rect"
                         alt="line-5"
                         href=""
                         title=""
                         style="position: absolute; left: 0.2777777777777778%; top: 22.794117647058822%; width: 99.25925925925925%; height: 7.444852941176471%; z-index: 2;"
                         id="5"></a>

						             <a class="rect"
                         alt="line-6"
                         href=""
                         title=""
                         style="position: absolute; left: 0.18518518518518517%; top: 28.676470588235293%; width: 99.81481481481481%; height: 8.547794117647058%; z-index: 2;"
                         id="6"></a>

						             <a class="rect"
                         alt="line-7"
                         href=""
                         title=""
                         style="position: absolute; left: 2.4074074074074074%; top: 34.83455882352941%; width:97.22222222222223%; height: 8.088235294117647%; z-index: 2;"
                         id="7"></a>

						             <a class="rect"
                         alt="line-8"
                         href=""
                         title=""
                         style="position: absolute; left: 0.0%; top: 40.900735294117645%; width: 99.16666666666667%; height: 7.9963235294117645%; z-index: 2;"
                         id="8"></a>
					               
						             <a class="rect"
                         alt="line-9"
                         href=""
                         title=""
                         style="position: absolute; left: 0.0%; top: 47.150735294117645%; width: 99.07407407407408%; height: 8.180147058823529%; z-index: 2;"
                         id="9"></a>
					               
						             <a class="rect"
                         alt="line-10"
                         href=""
                         title=""
                         style="position: absolute; left: 0.0%; top: 53.58455882352941%; width: 98.24074074074075%; height: 6.985294117647059%; z-index: 2;"
                         id="10"></a>
					               
						             <a class="rect"
                         alt="line-11"
                         href=""
                         title=""
                         style="position: absolute; left: 0.0%; top: 58.8235294117647%; width: 99.9074074074074%; height: 7.352941176470588%; z-index: 2;"
                         id="11"></a>
					               
						             <a class="rect"
                         alt="line-12"
                         href=""
                         title=""
                         style="position: absolute; left: 0.0%; top: 64.24632352941177%; width: 98.98148148148148%; height: 8.180147058823529%; z-index: 2;"
                         id="12"></a>
					               
						             <a class="rect"
                         alt="line-13"
                         href=""
                         title=""
                         style="position: absolute; left: 0.0%; top: 70.58823529411765%; width: 99.9074074074074%; height: 7.8125%; z-index: 2;"
                         id="13"></a>
						             <a class="rect"
                         alt="line-14"
                         href=""
                         title=""
                         style="position: absolute; left: 0.18518518518518517%; top: 76.5625%; width: 99.25925925925925%; height: 8.363970588235293%; z-index: 2;"
                         id="14"></a>
						             <a class="rect"
                         alt="line-15"
                         href=""
                         title=""
                         style="position: absolute; left: 0.18518518518518517%; top: 83.63970588235294%; width: 99.25925925925925%; height: 8.731617647058824%; z-index: 2;"
                         id="15"></a>
					               
						             <a class="rect"
                         alt="line-16"
                         href=""
                         title=""
                         style="position: absolute; left: 0.0%; top: 88.87867647058823%; width: 99.81481481481481%; height: 9.099264705882353%; z-index: 2;"
                         id="16"></a>
                    -->
				        </div>
			      </div>
            <script>
             var line1 = {
                 "x1" : "12",
                 "width" : "1059",
                 "y1" : "0",
                 "height" : "73",
                 "index" : "1",
                 "bbox" : "12, 0, 1071, 73"
             };
             var line2 = {
                 "x1" : "6",
                 "width" : "1061",
                 "y1" : "50",
                 "height" : "93",
                 "index" : "2",
                 "bbox" : "6, 50, 1067, 143"
             };
             var line3 = {
                 "x1" : "2",
                 "width" : "1078",
                 "y1" : "120",
                 "height" : "87",
                 "index" : "3",
                 "bbox" : "2, 120, 1080, 207"
             };
             var line4 = {
                 "x1" : "2",
                 "width" : "1078",
                 "y1" : "180",
                 "height" : "86",
                 "index" : "4",
                 "bbox" : "2, 180, 1080, 266"
             };
             var line5 = {
                 "x1" : "3",
                 "width" : "1072",
                 "y1" : "248",
                 "height" : "81",
                 "index" : "5",
                 "bbox" : "3, 248, 1075, 329"
             };
             var lines = [ line1, line2, line3, line4, line5 ];
            </script>
			      <div class="column">
                <div id="hide-tools">
                    <fieldset id="toolbox-set">
                        <legend>Tools</legend>
                        <fieldset id="button-set">
                            <button onclick="deleteBoxes()"
                                    value="" id="deleteButton"
                                    title="Delete Selections">
                                <img src="icons/delete.svg" alt="Delete Button"/>
                            </button>
                            <button onclick="undoDeletion()" id="undodeleteButton"
                                    title="Undo Delete">
                                <img src="icons/undo.svg" alt="Undo Icon"/>
                                <img src="icons/delete.svg" alt="Delete Icon"/>
                            </button>
                            <button onclick="addTranscription()"
                                    id="addTranscriptionButton"
                                    title="Add Selection">
                                <img src="icons/addbox.svg" alt="Add Selection Button"/>
                            </button>
                            <button onclick="saveEverything()"
                                    id="saveEverythingButton"
                                    title="Save">
                                <img src="icons/save.svg" alt="Save Button"/>
                            </button>
                            <!-- <button onclick="addLines()" id="addLineButton">
                                 Add Lines
                                 </button>
                            -->
                            <button id="uploadTranscriptionButton"
                                    title="Upload Transcription File"
                                    onclick="uploadTranscription()">
                                <img src="icons/upload.svg"
                                     alt="Upload Text Button"/>
                            </button>
                            <button id="markRTTranscriptionButton"
                                    title="Mark Right to Left Text"
                                    onclick="markRTLTranscription()">
                                Mark as Right To Left
                            </button>
                            <button id="markRTLTranscriptionButton"
                                    title="Mark Right to Left Text"
                                    onclick="markLTRTranscription()">
                                Mark as Left To Right
                            </button>
                        </fieldset>
                        <fieldset id="box-set">
                            <legend>Selected Region Type</legend>
                            <label class="lbl-rbox-container">
                                Character
                                <input type="radio"
                                       id="char-rbox"
                                       value="character"
                                       onclick="changeAddTTitle(event)"
                                       name="selected-region-rbutton"/>
                            </label>
                            <label class="lbl-rbox-container">
                                Line
                                <input type="radio"
                                       value="line"
                                       onclick="changeAddTTitle(event)"
                                       name="selected-region-rbutton""
                                       id="line-rbox"/>
                            </label>
                            <label class="lbl-rbox-container">
                                Column
                                <input type="radio"
                                       value="column"
                                       onclick="changeAddTTitle(event)"
                                       name="selected-region-rbutton""
                                       id="column-rbox"/>
                            </label>
                            <label class="lbl-rbox-container">
                                Region
                                <input type="radio"
                                       value="region"
                                       onclick="changeAddTTitle(event)"
                                       name="selected-region-rbutton""
                                       id="region-rbox"/>
                            </label>
                        </fieldset> <!-- ends boxset -->
                    </fieldset> <!-- ends toolbox -->
                    <fieldset>
                        <legend>Options</legend>
                        <label class="lbl-showall">
                            Show All Detected Lines
                            <input type="checkbox"
                                   id="showall-checkbox"
                                   class="showall-checkbox"
                                   onchange="drawAllDetections(event)"/>
                        </label>
                        <label class="lbl-selectall">
                            Select/Deselect All Lines
                            <input type="checkbox"
                                   id="selectAllLines-checkbox"
                                   onchange="selectAllLines()"
                                   class="selectAllLines-checkbox"/>
                        </label>
                        <label class="lbl-showviewer">
                            Activate Viewer
                            <input type="checkbox"
                                   id="activateViewer-checkbox"
                                   onchange="activateViewer()"
                                   class="viewer-checkbox"/>
                        </label>
                    </fieldset> <!-- Ends options -->
                </div>
                <label class="lbl-showtools">
                    Show Toolbox
                    <input type="checkbox"
                           id="showtoolbox-checkbox"
                           onchange="showToolBox(event)"
                           class="showtoolbox-checkbox"/>
                </label>
                <ol id="text-line-list">
				            <li class="item-group" id="ig1">
                        <ul class="item-list" id="il1">
                            <li class="line-widget" id="lw1">
                                <label class="cbox-container" id="cbc1">
                                    <input type="checkbox"
                                           id="lcbox1"
                                           class="line-cbox"//>
                                </label>
                            </li>
                            <li id="el1">
					                      <textarea id="ta1"
                                          contenteditable="true"
                                          spellcheck="true"
                                          onfocus="viewLine(event)"
                                          data-bbox="0, 0, 1071, 73"
                                          data-placeholder="Enter text for line 1"
                                          class="editable-textarea">
					                      </textarea>
                            </li>
                        </ul>
				            </li>
                    <li class="item-group" id="ig2">
                        <ul class="item-list" id="il2">
                            <li class="line-widget" id="lw2">
                                <label class="cbox-container" id="cbc2">
                                    <input type="checkbox"
                                           id="lcbox2"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el2">
					                      <textarea id="ta2"
                                          spellcheck="true"
                                          onfocus="viewLine(event)"
                                          data-bbox="6, 50, 1067, 143"
                                          data-placeholder="Enter text for line 2"
                                          class="editable-textarea">
                                </textarea>
					                  </li>
                        </ul>
                    </li>
                    <li class="item-group" id="ig3">
                        <ul class="item-list" id="il3">
                            <li class="line-widget" id="lw3">
                                <label class="cbox-container" id="cbc3">
                                    <input type="checkbox"
                                           id="lcbox3"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el3">
					                      <textarea id="ta3"
                                          spellcheck="true"
                                          data-bbox="2, 120, 1080, 207"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 3"
                                          class="editable-textarea">
                                </textarea>
						                </li>
                        </ul
					          </li>
				            <li class="item-group" id="ig4">
                        <ul class="item-list" id="il4">
                            <li class="line-widget" id="lw4">
                                <label class="cbox-container" id="cbc4">
                                    <input type="checkbox"
                                           id="lcbox4"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el4">
					                      <textarea id="ta4"
                                          spellcheck="true"

                                          onfocus="viewLine(event)"
                                          data-bbox="2, 180, 1080, 266"
                                          data-placeholder="Enter text for line 4"
                                          class="editable-textarea">
                                </textarea>
						                </li>
                        </ul>
					          </li>
	                  <li class="item-group" id="ig5">
                        <ul class="item-list" id="il5">
                            <li class="line-widget" id="lw5">
                                <label class="cbox-container" id="cbc5">
                                    <input type="checkbox"
                                           id="lcbox5"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el5">
					                      <textarea id="ta5"
                                          spellcheck="true"
                                          data-bbox="3, 248, 1075, 329"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 5"
                                          class="editable-textarea">
                                </textarea>
							              </li>
                        </ul>
					          </li>
	                  <li class="item-group" id="ig6">
                        <ul class="item-list" id="il6">
                            <li class="line-widget" id="lw6">
                                <label class="cbox-container" id="cbc6">
                                    <input type="checkbox"
                                           id="lcbox6"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el6">
					                      <textarea id="ta6"
                                          spellcheck="true"
                                          data-bbox="2, 312, 1080, 405"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 6"
                                          class="editable-textarea">
                                </textarea>
							              </li>
                        </ul>
					          </li>
	                  <li class="item-group" id="ig7">
                        <ul class="item-list" id="il7">
                            <li class="line-widget" id="lw7">
                                <label class="cbox-container" id="cbc7">
                                    <input type="checkbox"
                                           id="lcbox7"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el7">
					                      <textarea id="ta7"
                                          spellcheck="true"
                                          data-bbox="26, 379, 1076, 467"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 7"
                                          class="editable-textarea">
                                </textarea>
							              </li>
                        </ul>
					          </li>
	                  <li class="item-group" id="ig8">
                        <ul class="item-list" id="il8">
                            <li class="line-widget" id="lw8">
                                <label class="cbox-container" id="cbc8">
                                    <input type="checkbox"
                                           id="lcbox8"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el8">
					                      <textarea id="ta8"
                                          spellcheck="true"
                                          data-bbox="0, 445, 1071, 532"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 8"
                                          class="editable-textarea">
                                </textarea>
							              </li>
                        </ul>
					          </li>
	                  <li class="item-group" id="ig9">
                        <ul class="item-list" id="il9">
                            <li class="line-widget" id="lw9">
                                <label class="cbox-container" id="cbc9">
                                    <input type="checkbox"
                                           id="lcbox9"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el9">
					                      <textarea id="ta9"
                                          spellcheck="true"
                                          data-bbox="0, 513, 1070, 602"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 9"
                                          class="editable-textarea">
                                </textarea>
							              </li>
                        </ul>
					          </li>
	                  <li class="item-group" id="ig10">
                        <ul class="item-list" id="il10">
                            <li class="line-widget" id="lw10">
                                <label class="cbox-container" id="cbc10">
                                    <input type="checkbox"
                                           id="lcbox10"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el10">
					                      <textarea id="ta10"
                                          spellcheck="true"
                                          data-bbox="0, 583, 1061, 659"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 10"
                                          class="editable-textarea">
                                </textarea>
							              </li>
                        </ul>
					          </li>
	                  <li class="item-group" id="ig11">
                        <ul class="item-list" id="il11">
                            <li class="line-widget" id="lw11">
                                <label class="cbox-container" id="cbc11">
                                    <input type="checkbox"
                                           id="lcbox11"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el11">
					                      <textarea id="ta11"
                                          spellcheck="true"
                                          data-bbox="0, 640, 1079, 720"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 11"
                                          class="editable-textarea">
                                </textarea>
							              </li>
                        </ul>
					          </li>
	                  <li class="item-group" id="ig12">
                        <ul class="item-list" id="il12">
                            <li class="line-widget" id="lw12">
                                <label class="cbox-container" id="cbc12">
                                    <input type="checkbox"
                                           id="lcbox12"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el12">
					                      <textarea id="ta12"
                                          spellcheck="true"
                                          data-bbox="0, 699, 1069, 788"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 12"
                                          class="editable-textarea">
                                </textarea>
							              </li>
                        </ul>
					          </li>
	                  <li class="item-group" id="ig13">
                        <ul class="item-list" id="il13">
                            <li class="line-widget" id="lw13">
                                <label class="cbox-container" id="cbc13">
                                    <input type="checkbox"
                                           id="lcbox13"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el13">
					                      <textarea id="ta13"
                                          spellcheck="true"
                                          data-bbox="0, 768, 1079, 853"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 13"
                                          class="editable-textarea">
                                </textarea>
							              </li>
                        </ul>
				            </li>
	                  <li class="item-group" id="ig14">
                        <ul class="item-list" id="il14">
                            <li class="line-widget" id="lw14">
                                <label class="cbox-container" id="cbc14">
                                    <input type="checkbox"
                                           id="lcbox14"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el14">
					                      <textarea id="ta14"
                                          spellcheck="true"
                                          data-bbox="2, 833, 1074, 924"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 14"
                                          class="editable-textarea">
							              </li>
                        </ul>
				            </li>
	                  <li class="item-group" id="ig15">
                        <ul class="item-list" id="il15">
                            <li class="line-widget" id="lw15">
                                <label class="cbox-container" id="cbc15">
                                    <input type="checkbox"
                                           id="lcbox15"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el15">
					                      <textarea id="ta15"
                                          spellcheck="true"
                                          data-bbox="2, 910, 1074, 1005"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 15"
                                          class="editable-textarea">
                                </textarea>
							              </li>
                        </ul>
				            </li>
	                  <li class="item-group" id="ig16">
                        <ul class="item-list" id="il16">
                            <li class="line-widget" id="lw16">
                                <label class="cbox-container" id="cbc16">
                                    <input type="checkbox"
                                           id="lcbox16"
                                           class="line-cbox"/>
                                </label>
                            </li>
                            <li id="el16">
					                      <textarea id="ta16"
                                          spellcheck="true"
                                          data-bbox="0, 967, 1078, 1066"
                                          onfocus="viewLine(event)"
                                          data-placeholder="Enter text for line 16"
                                          class="editable-textarea">
                                </textarea>
                            </li>
                        </ul>
                    </li>
				        </ol>
			      </div>
		    </section>
	      <script src="js/widgets.js"></script>
	  </body>
</html>
